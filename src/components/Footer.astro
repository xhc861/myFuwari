---

import { profileConfig } from "../config";
import { url } from "../utils/url-utils";

const currentYear = new Date().getFullYear();
const launchDate = new Date("2026-01-02");
const today = new Date();
const daysRunning = Math.floor((today - launchDate) / (1000 * 60 * 60 * 24));

let dailyQuote = "“愿你眼中总有光芒，活成你想要的模样。”"; //猜猜这是什么

// 尝试从每日一言API获取句子
try {
  const res = await fetch("https://v1.hitokoto.cn?c=i&encode=json");
  if (res.ok) {
    const data = await res.json();
    if (data && data.hitokoto) {
      dailyQuote = `“${data.hitokoto}” — ${data.from || "佚名"}`;
    }
  }
} catch (e) {
  console.warn("每日一言 API 获取失败，使用默认句。");
}
---

<div class="transition border-t border-black/10 dark:border-white/15 my-10 border-dashed mx-32"></div>

<div class="transition border-dashed border-[oklch(85%_0.01_var(--hue))] dark:border-white/15 rounded-2xl mb-12 flex flex-col items-center justify-center px-6 space-y-4 text-center">
    <!-- 每日一言 -->
    <div id="daily-quote" class="text-sm italic opacity-80">
        {dailyQuote}
    </div>

    <!-- 安全运行天数 -->
    <div class="text-xs text-gray-500 dark:text-gray-400">
        本网站已安全运行 <span id="run-days">{daysRunning}</span> 天
    </div>

    <!-- 底部信息 -->
    <div class="transition text-50 text-sm text-center">
        &copy; <span id="copyright-year">{currentYear}</span> {profileConfig.name}. All Rights Reserved. /
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href={url('rss.xml')}>RSS</a> /
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href={url('sitemap-index.xml')}>Sitemap</a><br>
        本网站使用
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://astro.build">Astro</a> 和
        <a class="transition link text-[var(--primary)] font-medium" target="_blank" href="https://github.com/saicaca/fuwari">Fuwari</a>
        项目并二次开发
    </div>
</div>
